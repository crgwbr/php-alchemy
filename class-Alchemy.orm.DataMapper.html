<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="generator" content="ApiGen 2.8.0" />

	<title>Class Alchemy\orm\DataMapper</title>

	<script type="text/javascript" src="resources/combined.js?3361484702"></script>
	<script type="text/javascript" src="elementlist.js?4283196867"></script>
	<link rel="stylesheet" type="text/css" media="all" href="resources/style.css?3505392360" />

</head>

<body>
<div id="left">
	<div id="menu">
		<a href="index.html" title="Overview"><span>Overview</span></a>


		<div id="groups">
			<h3>Namespaces</h3>
			<ul>
				<li class="active"><a href="namespace-Alchemy.html">Alchemy<span></span></a>
						<ul>
				<li><a href="namespace-Alchemy.core.html">core<span></span></a>
						<ul>
				<li><a href="namespace-Alchemy.core.query.html">query</a>
						</li>
				<li><a href="namespace-Alchemy.core.schema.html">schema</a>
						</li>
							</ul></li>
				<li><a href="namespace-Alchemy.dialect.html">dialect</a>
						</li>
				<li><a href="namespace-Alchemy.engine.html">engine</a>
						</li>
				<li class="active"><a href="namespace-Alchemy.orm.html">orm</a>
						</li>
				<li><a href="namespace-Alchemy.tests.html">tests</a>
						</li>
				<li><a href="namespace-Alchemy.util.html">util<span></span></a>
						<ul>
				<li><a href="namespace-Alchemy.util.promise.html">promise</a>
						</li>
							</ul></li></ul></li>
				<li><a href="namespace-PHP.html">PHP</a>
						</li>
			</ul>
		</div>

		<hr />


		<div id="elements">
			<h3>Classes</h3>
			<ul>
				<li class="active"><a href="class-Alchemy.orm.DataMapper.html">DataMapper</a></li>
				<li><a href="class-Alchemy.orm.DDL.html">DDL</a></li>
				<li><a href="class-Alchemy.orm.ManyToOne.html">ManyToOne</a></li>
				<li><a href="class-Alchemy.orm.OneToMany.html">OneToMany</a></li>
				<li><a href="class-Alchemy.orm.OneToOne.html">OneToOne</a></li>
				<li><a href="class-Alchemy.orm.RelatedSet.html">RelatedSet</a></li>
				<li><a href="class-Alchemy.orm.Relationship.html">Relationship</a></li>
				<li><a href="class-Alchemy.orm.Session.html">Session</a></li>
				<li><a href="class-Alchemy.orm.SessionSelect.html">SessionSelect</a></li>
				<li><a href="class-Alchemy.orm.WorkQueue.html">WorkQueue</a></li>
			</ul>





		</div>
	</div>
</div>

<div id="splitter"></div>

<div id="right">
<div id="rightInner">
	<form id="search">
		<input type="hidden" name="cx" value="" />
		<input type="hidden" name="ie" value="UTF-8" />
		<input type="text" name="q" class="text" />
		<input type="submit" value="Search" />
	</form>

	<div id="navigation">
		<ul>
			<li>
				<a href="index.html" title="Overview"><span>Overview</span></a>
			</li>
			<li>
				<a href="namespace-Alchemy.orm.html" title="Summary of Alchemy\orm"><span>Namespace</span></a>
			</li>
			<li class="active">
<span>Class</span>			</li>
		</ul>
		<ul>
			<li>
				<a href="tree.html" title="Tree view of classes, interfaces, traits and exceptions"><span>Tree</span></a>
			</li>
		</ul>
		<ul>
		</ul>
	</div>

<div id="content" class="class">
	<h1>Class DataMapper</h1>


	<div class="description">
	
<p>Abstract base class for custom ORM models. this class doesn't actually store
any data, it merely acts as an interface between Domain objects and the Session
(which actually owns all of the DB records).</p>

	</div>



	<div>
		<h4>Direct known subclasses</h4>
			<a href="class-Alchemy.tests.Language.html">Alchemy\tests\Language</a>, 
			<a href="class-Alchemy.tests.UploadedFile.html">Alchemy\tests\UploadedFile</a>
	</div>






	<div class="info">
		<b>Abstract</b><br />
		
		<b>Namespace:</b> <a href="namespace-Alchemy.html">Alchemy</a>\<a href="namespace-Alchemy.orm.html">orm</a><br />
		

		<b>Located at</b> <a href="source-class-Alchemy.orm.DataMapper.html#11-362" title="Go to source code">alchemy/orm/DataMapper.php</a><br />
	</div>



	<table class="summary" id="methods">
	<caption>Methods summary</caption>
	<tr data-order="add_relationship" id="_add_relationship">

		<td class="attributes"><code>
			 public static
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_add_relationship">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#39-66" title="Go to source code">add_relationship</a>( <span>string <var>$name</var></span>, <span>string <var>$def</var></span> )</code>

		<div class="description short">
			
<p>Add a relationship to this model</p>

		</div>

		<div class="description detailed hidden">
			
<p>Add a relationship to this model</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$name</var></dt>
					<dd><code>string</code><br>$name</dd>
					<dt><var>$def</var></dt>
					<dd><code>string</code><br>or Relationship $def</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="from_session" id="_from_session">

		<td class="attributes"><code>
			 public static
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_from_session">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#69-80" title="Go to source code">from_session</a>( <span><code><a href="class-Alchemy.orm.Session.html">Alchemy\orm\Session</a></code> <var>$session</var></span>, <span>mixed <var>$sessionID</var></span> )</code>

		<div class="description short">
			
<p>Instantiate a domain object from the session</p>

		</div>

		<div class="description detailed hidden">
			
<p>Instantiate a domain object from the session</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$session</var></dt>
					<dd><code><code><a href="class-Alchemy.orm.Session.html">Alchemy\orm\Session</a></code></code><br>$session The database session which owns this record</dd>
					<dt><var>$sessionID</var></dt>
					<dd><code>mixed</code><br>$sessionID A pointer to the record for this objects data in the session</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="list_mappers" id="_list_mappers">

		<td class="attributes"><code>
			 public static
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_list_mappers">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#83-98" title="Go to source code">list_mappers</a>( )</code>

		<div class="description short">
			
<p>List all subclasses of DataMapper. Only works for classes already loaded by
PHP.</p>

		</div>

		<div class="description detailed hidden">
			
<p>List all subclasses of DataMapper. Only works for classes already loaded by
PHP.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="list_relationships" id="_list_relationships">

		<td class="attributes"><code>
			 public static
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_list_relationships">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#101-117" title="Go to source code">list_relationships</a>( )</code>

		<div class="description short">
			
<p>List the relationships belonging to this model</p>

		</div>

		<div class="description detailed hidden">
			
<p>List the relationships belonging to this model</p>




				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="register" id="_register">

		<td class="attributes"><code>
			 public static
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_register">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#120-127" title="Go to source code">register</a>( )</code>

		<div class="description short">
			
<p>Register the model's table and relationships. This should be called
immediately after defining a new model class.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Register the model's table and relationships. This should be called
immediately after defining a new model class.</p>








		</div>
		</div></td>
	</tr>
	<tr data-order="schema" id="_schema">

		<td class="attributes"><code>
			 public static
			<code><a href="class-Alchemy.core.schema.Table.html">Alchemy\core\schema\Table</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_schema">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#130-153" title="Go to source code">schema</a>( )</code>

		<div class="description short">
			
<p>Gen an instance of Table that represents the schema of this domain
object.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Gen an instance of Table that represents the schema of this domain
object.</p>




				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-Alchemy.core.schema.Table.html">Alchemy\core\schema\Table</a></code></code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="table" id="_table">

		<td class="attributes"><code>
			 public static
			<code><a href="class-Alchemy.core.query.TableRef.html">Alchemy\core\query\TableRef</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_table">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#156-163" title="Go to source code">table</a>( )</code>

		<div class="description short">
			
<p>Return a table reference for this model</p>

		</div>

		<div class="description detailed hidden">
			
<p>Return a table reference for this model</p>




				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-Alchemy.core.query.TableRef.html">Alchemy\core\query\TableRef</a></code></code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="table_name" id="_table_name">

		<td class="attributes"><code>
			 public static
			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_table_name">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#166-175" title="Go to source code">table_name</a>( )</code>

		<div class="description short">
			
<p>Get the table name for this mapper</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the table name for this mapper</p>




				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br>Table Name<br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="__construct" id="___construct">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#___construct">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#179-186" title="Go to source code">__construct</a>( )</code>

		<div class="description short">
			
<p>Object constructor.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Object constructor.</p>








		</div>
		</div></td>
	</tr>
	<tr data-order="__get" id="___get">

		<td class="attributes"><code>
			 public 
			mixed
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#___get">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#189-216" title="Go to source code">__get</a>( <span>string <var>$prop</var></span> )</code>

		<div class="description short">
			
<p>Get the value of a column on this object</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the value of a column on this object</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$prop</var></dt>
					<dd><code>string</code><br>$prop</dd>
				</dl></div>

				<h4>Returns</h4>
				<div class="list">
					<code>mixed</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="__set" id="___set">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#___set">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#219-238" title="Go to source code">__set</a>( <span>string <var>$prop</var></span>, <span>mixed <var>$value</var></span> )</code>

		<div class="description short">
			
<p>Get the value of a column on this object. Nothing is actually written back to
the session until {@DataMapper::save()} is called.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Get the value of a column on this object. Nothing is actually written back to
the session until {@DataMapper::save()} is called.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$prop</var></dt>
					<dd><code>string</code><br>$prop Column Name</dd>
					<dt><var>$value</var></dt>
					<dd><code>mixed</code><br>$value</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="getPrimaryKey" id="_getPrimaryKey">

		<td class="attributes"><code>
			 public 
			array
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_getPrimaryKey">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#241-254" title="Go to source code">getPrimaryKey</a>( )</code>

		<div class="description short">
			
<p>Return a set of values which represent this object's primary key.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Return a set of values which represent this object's primary key.</p>




				<h4>Returns</h4>
				<div class="list">
					<code>array</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="getRelatedSet" id="_getRelatedSet">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_getRelatedSet">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#257-262" title="Go to source code">getRelatedSet</a>( <span>mixed <var>$name</var></span> )</code>

		<div class="description short">
			
<p>Return a related set object by relationship name</p>

		</div>

		<div class="description detailed hidden">
			
<p>Return a related set object by relationship name</p>








		</div>
		</div></td>
	</tr>
	<tr data-order="getSession" id="_getSession">

		<td class="attributes"><code>
			 public 
			<code><a href="class-Alchemy.orm.Session.html">Alchemy\orm\Session</a></code>
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_getSession">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#265-272" title="Go to source code">getSession</a>( )</code>

		<div class="description short">
			
<p>Return the Session of this object</p>

		</div>

		<div class="description detailed hidden">
			
<p>Return the Session of this object</p>




				<h4>Returns</h4>
				<div class="list">
					<code><code><a href="class-Alchemy.orm.Session.html">Alchemy\orm\Session</a></code></code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="getSessionID" id="_getSessionID">

		<td class="attributes"><code>
			 public 
			string
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_getSessionID">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#275-282" title="Go to source code">getSessionID</a>( )</code>

		<div class="description short">
			
<p>Return the ID used to identify this objects record in the Session</p>

		</div>

		<div class="description detailed hidden">
			
<p>Return the ID used to identify this objects record in the Session</p>




				<h4>Returns</h4>
				<div class="list">
					<code>string</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="isTransient" id="_isTransient">

		<td class="attributes"><code>
			 public 
			boolean
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_isTransient">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#285-298" title="Go to source code">isTransient</a>( )</code>

		<div class="description short">
			
<p>Return true if this model doesn't yet exist in the database</p>

		</div>

		<div class="description detailed hidden">
			
<p>Return true if this model doesn't yet exist in the database</p>




				<h4>Returns</h4>
				<div class="list">
					<code>boolean</code><br />
				</div>




		</div>
		</div></td>
	</tr>
	<tr data-order="onPrimaryKeyAllocated" id="_onPrimaryKeyAllocated">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_onPrimaryKeyAllocated">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#301-316" title="Go to source code">onPrimaryKeyAllocated</a>( <span>mixed <var>$fn</var> = <span class="php-keyword1">null</span></span> )</code>

		<div class="description short">
			
<p>Event invoked by Session when this model is migrated from using a temporary
in-memory key to a real (saved in the RDBMS) primary key.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Event invoked by Session when this model is migrated from using a temporary
in-memory key to a real (saved in the RDBMS) primary key.</p>








		</div>
		</div></td>
	</tr>
	<tr data-order="rollback" id="_rollback">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_rollback">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#319-324" title="Go to source code">rollback</a>( )</code>

		<div class="description short">
			
<p>Revert all unsaved changed to this model</p>

		</div>

		<div class="description detailed hidden">
			
<p>Revert all unsaved changed to this model</p>








		</div>
		</div></td>
	</tr>
	<tr data-order="save" id="_save">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_save">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#327-349" title="Go to source code">save</a>( <span>boolean <var>$queueUpdate</var> = <span class="php-keyword1">true</span></span> )</code>

		<div class="description short">
			
<p>Save this object's data back to the session. By default this will queue an
UPDATE statement to be run on the server as soon as {@Session::commit()} is
called.</p>

		</div>

		<div class="description detailed hidden">
			
<p>Save this object's data back to the session. By default this will queue an
UPDATE statement to be run on the server as soon as {@Session::commit()} is
called.</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$queueUpdate</var></dt>
					<dd><code>boolean</code><br>$queueUpdate Default's to true</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	<tr data-order="setSession" id="_setSession">

		<td class="attributes"><code>
			 public 
			
			
			</code>
		</td>

		<td class="name"><div>
		<a class="anchor" href="#_setSession">#</a>
		<code><a href="source-class-Alchemy.orm.DataMapper.html#352-361" title="Go to source code">setSession</a>( <span><code><a href="class-Alchemy.orm.Session.html">Alchemy\orm\Session</a></code> <var>$session</var></span>, <span>string <var>$sessionID</var></span> )</code>

		<div class="description short">
			
<p>Set the Session and Session pointer for this object</p>

		</div>

		<div class="description detailed hidden">
			
<p>Set the Session and Session pointer for this object</p>



				<h4>Parameters</h4>
				<div class="list"><dl>
					<dt><var>$session</var></dt>
					<dd><code><code><a href="class-Alchemy.orm.Session.html">Alchemy\orm\Session</a></code></code><br>$session Session which owns this object</dd>
					<dt><var>$sessionID</var></dt>
					<dd><code>string</code><br>$sessionID Pointer to data record in $session</dd>
				</dl></div>





		</div>
		</div></td>
	</tr>
	</table>












	<table class="summary" id="properties">
	<caption>Properties summary</caption>
	<tr data-order="table_name" id="$table_name">
		<td class="attributes"><code>
			protected static 
			mixed
		</code></td>

		<td class="name">
				<a href="source-class-Alchemy.orm.DataMapper.html#19-23" title="Go to source code"><var>$table_name</var></a>
		</td>
		<td class="value"><code><span class="php-keyword1">null</span></code></td>
		<td class="description"><div>
			<a href="#$table_name" class="anchor">#</a>

			<div class="description short">
				
<p>Optional: Define the table name here. If left null, the class name will be
used</p>

			</div>

			<div class="description detailed hidden">
				
<p>Optional: Define the table name here. If left null, the class name will be
used</p>


			</div>
		</div></td>
	</tr>
	<tr data-order="props" id="$props">
		<td class="attributes"><code>
			protected static 
			array
		</code></td>

		<td class="name">
				<a href="source-class-Alchemy.orm.DataMapper.html#24" title="Go to source code"><var>$props</var></a>
		</td>
		<td class="value"><code><span class="php-keyword1">array</span>()</code></td>
		<td class="description"><div>
			<a href="#$props" class="anchor">#</a>

			<div class="description short">
				
			</div>

			<div class="description detailed hidden">
				

			</div>
		</div></td>
	</tr>
	<tr data-order="indexes" id="$indexes">
		<td class="attributes"><code>
			protected static 
			array
		</code></td>

		<td class="name">
				<a href="source-class-Alchemy.orm.DataMapper.html#25" title="Go to source code"><var>$indexes</var></a>
		</td>
		<td class="value"><code><span class="php-keyword1">array</span>()</code></td>
		<td class="description"><div>
			<a href="#$indexes" class="anchor">#</a>

			<div class="description short">
				
			</div>

			<div class="description detailed hidden">
				

			</div>
		</div></td>
	</tr>
	<tr data-order="relationships" id="$relationships">
		<td class="attributes"><code>
			protected static 
			array
		</code></td>

		<td class="name">
				<a href="source-class-Alchemy.orm.DataMapper.html#26" title="Go to source code"><var>$relationships</var></a>
		</td>
		<td class="value"><code><span class="php-keyword1">array</span>()</code></td>
		<td class="description"><div>
			<a href="#$relationships" class="anchor">#</a>

			<div class="description short">
				
			</div>

			<div class="description detailed hidden">
				

			</div>
		</div></td>
	</tr>
	</table>






</div>

	<div id="footer">
		 API documentation generated by <a href="http://apigen.org">ApiGen 2.8.0</a>
	</div>
</div>
</div>
</body>
</html>
